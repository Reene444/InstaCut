import{r as o,u as w,j as t,G as l,S as v,T as m,L}from"./index-DScARdBu.js";import{A as y}from"./AuthWrapper-ltF2VE1Q.js";import{h as E}from"./client-Qb3lmQYg.js";import{C as S}from"./Container-Dxlx_81o.js";import{T as u}from"./TextField-DVDeXLdW.js";import{B as b}from"./Button-BPioZcYg.js";const k=()=>{const[a,g]=o.useState(""),[r,h]=o.useState(""),[s,n]=o.useState({email:"",password:""}),[c,d]=o.useState(""),i=w();o.useEffect(()=>{const e=localStorage.getItem("token");i(e?"/":"/login")},[]);const x=()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),p=()=>r.length>=6&&r.length<=25,f=async()=>{if(n({email:"",password:""}),!x()){n(e=>({...e,email:"invalid email format"}));return}if(!p()){n(e=>({...e,password:"Password must be at least 6 chareacters"}));return}console.log("logging in with:",a,r),E("/auth/token",{email:a,password:r}).then(e=>{const{token:j}=e.data;d(""),localStorage.setItem("token",j),i("/"),window.location.reload()}).catch(e=>{console.error("login error",e),d("An error occured during login")})};return t.jsxs(S,{component:"main",maxWidth:"xs",children:[t.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"email",value:a,onChange:e=>g(e.target.value),error:!!s.email,helperText:s.email}),t.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:"Password",value:r,onChange:e=>h(e.target.value),error:!!s.password,helperText:s.password}),t.jsx(b,{variant:"contained",color:"primary",fullWidth:!0,onClick:f,children:"Login"}),c&&t.jsx("p",{style:{color:"red"},children:c})]})},C=k;function R(){return t.jsx(y,{children:t.jsxs(l,{container:!0,spacing:3,children:[t.jsx(l,{item:!0,xs:12,children:t.jsxs(v,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[t.jsx(m,{variant:"h3",children:"Login"}),t.jsx(m,{component:L,to:"/register",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Don't have an account?"})]})}),t.jsx(l,{item:!0,xs:12,children:t.jsx(C,{})})]})})}export{R as default};
