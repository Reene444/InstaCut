import{r as s,u as j,j as e,G as l,S as w,T as m,L as v}from"./index-CaTgf-P5.js";import{A as y}from"./AuthWrapper-pk7cyTAm.js";import{h as E}from"./client-D4iGueEE.js";import{C as S}from"./Container-M1th7Y8_.js";import{T as u}from"./TextField-CVcQVHyE.js";import{B as b}from"./Button-Pgcc59sp.js";const R=()=>{const[a,g]=s.useState(""),[t,h]=s.useState(""),[o,n]=s.useState({email:"",password:""}),[c,d]=s.useState(""),i=j();s.useEffect(()=>{const r=localStorage.getItem("token");i(r?"/":"/register")},[]);const p=()=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),x=()=>t.length>=6&&t.length<=25,f=async()=>{if(n({email:"",password:""}),!p()){n(r=>({...r,email:"invalid email format"}));return}if(!x()){n(r=>({...r,password:"Password must be at least 6 chareacters"}));return}console.log("logging in with:",a,t),E("/auth/users/add",{email:a,password:t}).then(()=>{d(""),i("/login"),window.location.reload()}).catch(r=>{console.error("login error",r),d("An error occured during login")})};return e.jsxs(S,{component:"main",maxWidth:"xs",children:[e.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"email",value:a,onChange:r=>g(r.target.value),error:!!o.email,helperText:o.email}),e.jsx(u,{variant:"outlined",margin:"normal",fullWidth:!0,label:"Password",type:"Password",value:t,onChange:r=>h(r.target.value),error:!!o.password,helperText:o.password}),e.jsx(b,{variant:"contained",color:"primary",fullWidth:!0,onClick:f,children:"Register"}),c&&e.jsx("p",{style:{color:"red"},children:c})]})},A=R;function I(){return e.jsx(y,{children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:12,children:e.jsxs(w,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(m,{variant:"h3",children:"Sign up"}),e.jsx(m,{component:v,to:"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Already have an account?"})]})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(A,{})})]})})}export{I as default};
